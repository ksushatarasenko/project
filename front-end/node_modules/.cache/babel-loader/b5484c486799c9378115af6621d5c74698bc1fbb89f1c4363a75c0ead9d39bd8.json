{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nclass SortingStore {\n  constructor() {\n    this.products = [];\n    this.sortedProducts = [];\n    this.sortPriceToLower = false;\n    this.sortPriceToDown = false;\n    this.sortNameToLower = false;\n    this.sortNameToDown = false;\n    this.showDiscount = false;\n    this.data = {};\n    this.intermedianteSortedProducts = [];\n    this.setShowDiscount = (checked, products) => {\n      this.showDiscount = checked;\n      this.products = products;\n      this.setFilterProducts();\n      this.updateSortedProducts();\n    };\n    //   ==================\n    this.setSortPriceToLower = products => {\n      this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n      this.sortPriceToLower = !this.sortPriceToLower;\n      this.setFilterProducts();\n      this.updateSortedProducts();\n    };\n    this.setSortPriceToDown = products => {\n      this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n      this.sortPriceToDown = !this.sortPriceToDown;\n      this.setFilterProducts();\n      this.updateSortedProducts();\n    };\n    this.setSortNameToLower = products => {\n      this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n      this.sortNameToLower = !this.sortNameToLower;\n      this.setFilterProducts();\n      this.updateSortedProducts();\n    };\n    this.setSortNameToDown = products => {\n      this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n      this.sortNameToDown = !this.sortNameToDown;\n      this.setFilterProducts();\n      this.updateSortedProducts();\n    };\n    makeAutoObservable(this);\n  }\n  resetSortedProducts() {\n    this.sortedProducts = [];\n  }\n  // ======= sort min-max ========\n  setSortPrice(data, products) {\n    this.data = data;\n    this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n    this.setFilterProducts();\n    this.updateSortedProducts();\n  }\n  // ========== ALL SORT ================\n  setFilterProducts() {\n    let sortedProducts = [...this.products];\n    this.updateSortedProducts();\n    console.log(\"массив отсортирован в начале сортировки\", sortedProducts);\n    if (this.data.minPrice >= 0 && this.data.maxPrice > 0) {\n      sortedProducts = sortedProducts.filter(product => {\n        const discontPrice = product.discont_price;\n        const price = product.price;\n        return discontPrice !== null && discontPrice >= this.data.minPrice && discontPrice <= this.data.maxPrice || discontPrice === null && price >= this.data.minPrice && price <= this.data.maxPrice;\n      });\n    }\n    console.log('проверка чекбокс до', this.showDiscount, sortedProducts);\n    if (this.showDiscount) {\n      sortedProducts = sortedProducts.filter(product => product.discont_price !== null);\n    }\n    console.log('проверка в начале сортировки', sortedProducts);\n    sortedProducts.sort((a, b) => {\n      const hasDiscountA = a.discont_price !== null;\n      const hasDiscountB = b.discont_price !== null;\n      const priceA = hasDiscountA ? a.discont_price : a.price;\n      const priceB = hasDiscountB ? b.discont_price : b.price;\n      if (this.sortPriceToLower) {\n        return priceB - priceA;\n      } else if (this.sortPriceToDown) {\n        return priceA - priceB;\n      } else if (this.sortNameToLower) {\n        return a.title.localeCompare(b.title);\n      } else if (this.sortNameToDown) {\n        return b.title.localeCompare(a.title);\n      }\n      return 0;\n    });\n    console.log('проверка в конце сортировки', sortedProducts);\n    console.log(this.data);\n    this.intermedianteSortedProducts = sortedProducts;\n    this.updateSortedProducts();\n  }\n  updateSortedProducts() {\n    this.sortedProducts = [...this.intermedianteSortedProducts];\n    console.log('проверка в конце обновление массива', this.sortedProducts);\n  }\n}\nconst sortingStore = new SortingStore();\nexport default sortingStore;","map":{"version":3,"names":["makeAutoObservable","SortingStore","constructor","products","sortedProducts","sortPriceToLower","sortPriceToDown","sortNameToLower","sortNameToDown","showDiscount","data","intermedianteSortedProducts","setShowDiscount","checked","setFilterProducts","updateSortedProducts","setSortPriceToLower","length","setSortPriceToDown","setSortNameToLower","setSortNameToDown","resetSortedProducts","setSortPrice","console","log","minPrice","maxPrice","filter","product","discontPrice","discont_price","price","sort","a","b","hasDiscountA","hasDiscountB","priceA","priceB","title","localeCompare","sortingStore"],"sources":["/Users/marinatarasenko/Documents/Frontend/project/front-end/src/store/sorting/sortingStore.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\n\n\nclass SortingStore {\n\n    products = [];\n    sortedProducts = [];\n    sortPriceToLower = false;\n    sortPriceToDown = false;\n    sortNameToLower = false;\n    sortNameToDown = false;\n    showDiscount = false;\n    data = {};\n    intermedianteSortedProducts = [];\n   \n\n    constructor() {\n        makeAutoObservable(this);\n        \n    }\n   \nresetSortedProducts() {\n        this.sortedProducts = [];\n    }\n\nsetShowDiscount = (checked, products) =>{\n    this.showDiscount = checked\n    this.products = products;\n    this.setFilterProducts() \n    this.updateSortedProducts();\n }   \n// ======= sort min-max ========\nsetSortPrice (data, products) {   \n    this.data = data\n    this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n    this.setFilterProducts()\n    this.updateSortedProducts();\n  }\n\n//   ==================\n\nsetSortPriceToLower = (products) => {\n    this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n    this.sortPriceToLower = !this.sortPriceToLower;\n    this.setFilterProducts();\n    this.updateSortedProducts();\n    }\nsetSortPriceToDown = (products) => { \n    this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n    this.sortPriceToDown = !this.sortPriceToDown;\n    this.setFilterProducts()\n    this.updateSortedProducts();\n}\n\nsetSortNameToLower = (products) => {\n    this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n    this.sortNameToLower = !this.sortNameToLower ; \n    this.setFilterProducts();\n    this.updateSortedProducts();\n}\n\nsetSortNameToDown = (products) => {\n    this.products = this.sortedProducts.length === 0 ? products : this.sortedProducts;\n    this.sortNameToDown = !this.sortNameToDown ; \n    this.setFilterProducts();\n    this.updateSortedProducts();\n}\n// ========== ALL SORT ================\n setFilterProducts(){\n    let sortedProducts = [...this.products]\n    this.updateSortedProducts();\n    console.log(\"массив отсортирован в начале сортировки\" , sortedProducts)\n    \n    if (this.data.minPrice >= 0 && this.data.maxPrice > 0) {\n        sortedProducts = sortedProducts.filter(product => {\n          const discontPrice = product.discont_price;\n          const price = product.price;     \n          return (discontPrice !== null && discontPrice >= this.data.minPrice && discontPrice <= this.data.maxPrice) ||\n                 (discontPrice === null && price >= this.data.minPrice && price <= this.data.maxPrice);\n        });\n      }\n    console.log('проверка чекбокс до',this.showDiscount,sortedProducts)\n\n    if(this.showDiscount){\n        sortedProducts = sortedProducts.filter((product) => product.discont_price !== null)\n    }\n\n    console.log('проверка в начале сортировки', sortedProducts)\n    \n    \n            sortedProducts.sort((a, b) => {\n                const hasDiscountA = a.discont_price !== null;\n                const hasDiscountB = b.discont_price !== null;  \n\n                const priceA = hasDiscountA ? a.discont_price : a.price;\n                const priceB = hasDiscountB ? b.discont_price : b.price;\n                if (this.sortPriceToLower) {\n                    return priceB - priceA ;\n                } else if (this.sortPriceToDown){\n                    return priceA  - priceB;\n                } else if(this.sortNameToLower) {\n                    return a.title.localeCompare(b.title);\n                } else if (this.sortNameToDown){\n                    return b.title.localeCompare(a.title)\n                }\n                    return 0;\n             });\n    \n    console.log('проверка в конце сортировки', sortedProducts)\n    console.log(this.data)\n    \n\n  \n    this.intermedianteSortedProducts = sortedProducts;\n    this.updateSortedProducts()\n    } \n\n    updateSortedProducts(){\n        this.sortedProducts = [...this.intermedianteSortedProducts];\n        console.log('проверка в конце обновление массива',this.sortedProducts)\n    }\n    \n}\n\n\nconst sortingStore = new SortingStore();\n\nexport default sortingStore;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}